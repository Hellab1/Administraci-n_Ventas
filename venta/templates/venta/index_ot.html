{% extends "base.html" %}
{% load static %}
{% block title %}Lista Orden{% endblock %}
{% block header %}
    {% if user.is_authenticated %}
        <div class="navbar-nav">
            <div class="nav-item text-nowrap">
                <a class="nav-link px-3" href="{% url 'sign_out' %}">Cerrar sesión</a>
            </div>
        </div>
    {% endif %}    
{% endblock header%}
{% block content %}
    {% if user.is_authenticated %}                        
        <table class="table table-striped table-hover">
            <thead>
                <tr>
                <th>Fecha de Compra</th>
                <th>Tipo de pago</th>
                <th>Cliente</th>
                <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
            
            {% for orden_compra in object_list %}
                <tr>
                    <td>{{ orden_compra.fecha_compra }}</td>
                    <td>{{ orden_compra.tipo_pago }}</td>
                    <td>{{ orden_compra.cliente }}</td> 
                    <td>                   
                        <form method="POST" action="eliminar/{{orden_compra.id_compra}}">
                            {% csrf_token %}
                            <div class="btn-group"> 
                                <a href="detalle/{{orden_compra.id_compra}}" title="Detalles" type="button" class="btn btn-success">Detalles </a>                  
                                <a href="editar/{{orden_compra.id_compra}}" title="Editar" type="button" class="btn btn-primary">Editar </a>
                                <button class="btn btn-danger" onclick="return eliminar();" type="submit">
                                    Eliminar
                                </button>
                            </div>
                        </form>                   
                    </td>
                </tr>
            {% endfor %}            
            </tbody>
        </table> 
        
        <div class="pagination">
            <span class="step-links">
                {% if page_obj.has_previous %}
                    <a href="?page=1">&laquo; Primera</a>
                    <a href="?page={{ page_obj.previous_page_number }}">Anterior</a>
                {% endif %}

                <span class="current">
                    Página  {{ page_obj.number }} de {{ page_obj.paginator.num_pages }}.
                </span>

                {% if page_obj.has_next %}
                    <a href="?page={{ page_obj.next_page_number }}">Siguiente</a>
                    <a href="?page={{ page_obj.paginator.num_pages }}">Ultima &raquo;</a>
                {% endif %}
            </span>
        </div>

        <script type="text/javascript">
            function eliminar() {
              var x = confirm("Eliminar Orden de Compra?");
              if (x)
                return true;
              else
                return false;
            }
        </script>  
    {% endif %}
{% endblock content %}